<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
    <title></title>

    <link href="lib/ionic/css/ionic.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    

    <!-- IF using Sass (run gulp sass first), then uncomment below and remove the CSS includes above
    <link href="css/ionic.app.css" rel="stylesheet">
    -->

    <!-- ionic/angularjs js -->
    <script src="lib/ionic/js/ionic.bundle.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.13/angular.js"></script>
    <script src="//angular-ui.github.io/bootstrap/ui-bootstrap-tpls-0.13.0.js"></script>
    <script src="interfaz.js"></script>
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">

    <!-- cordova script (this will be a 404 during development) -->
    <script src="cordova.js"></script>

    <!-- your app's js -->
    <script src="js/app.js"></script>
    <script src="js/controllers.js"></script>
    <script src="js/services.js"></script>
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="PushNotification.js"></script>
    <script type="text/javascript" src="js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="js/configuration.js"></script>
    <script type="text/javascript" src="js/index.js"></script>        
    <script type="text/javascript">

            var ready = false;
			
			function register() {
            var pushNotification = window.plugins.pushNotification;
 
            if (isAndroidDevice()) {
                pushNotification.register(function(result) {                    
                console.log('Status: ' + result);
               }, function(result) {
                 alert('Error handler ' + result);
               }, {
                 "senderID": "4834099140410", /* Google developers project number */
                 "ecb" : "onNotificationGCM" /* Function name to handle notifications */
               });
                 } else {
                  alert('Your device platform is not Android!!!');
                 }    
              }
			  
			  function onNotificationGCM(e) {
                  switch (e.event) {
                  case 'registered':
                  if (e.regid.length > 0) {
                     var registrationId = e.regid; //GCM Registration ID
                     registerOn3rdPartyServer(registrationId);
                  }
                  break;
 
                  case 'message':
            // handle notification message
                     break;
 
                    case 'error':
            // handle error
                    break;
 
                    default:
            // handle default
                    break;
                  }
                } 
				
				
		 function registerOn3rdPartyServer(registrationId) {
          $.ajax({
            type: "POST",
            url: "http://http://201.232.18.92:8080/gcm-rest-master/api/registrations", /* Your gcm-rest registration endpoint */
            data: {
              "registrationId": registrationId
           },
            headers : {
             "Content-Type" : "application/x-www-form-urlencoded"
           },
           success: function() {
              statusElement.html('READY FOR NOTIFICATIONS');
          },
          error: function(e) {
              alert("Unable to register " + JSON.stringify(e));
             }
            });
            }
			  
            function onNotificationGCMEvent(e) {

                if (!ready) {
                    setTimeout(function() {
                        onNotificationGCMEvent(e);
                    }, 1000);
                    return;
                }

                try {
                    var elem = angular.element(document.querySelector('[ng-controller]'));
                    var injector = elem.injector();
                    var notificationService = injector.get('NotificationService');
                    notificationService.handleNotification(e);
                } catch (e) {
                    alert(e);
                }
            }

            window.ionic.Platform.ready(function() {
                angular.bootstrap(document, ['PushNotificationsApp']);
                ready = true;                                
            });


        </script>
  </head>
  <body ng-app="starter">
    
    <ion-view title="Mali Accesorios!">
        <ion-content class="padding">
        <h1>Bienvenidos a Mali Accesorios</h1>
        <div>
          <p>
            <a href="http://www.maliaccesorios.com/index.php/productos/collares-necklaces.html">
            <img src="/img/collares-home-mali.jpg" border="0" alt=""/>
            </a>
            <a href="http://www.maliaccesorios.com/index.php/productos/pulseras-bracelet.html">
            <img src="/img/pulseras-home-mali.jpg" border="0" alt="" width="481" height="201"/>
            </a>
            <a href="http://www.maliaccesorios.com/index.php/productos/aretes-earrings.html">
            <img src="/img/aretes-home-mali.jpg" border="0" alt=""/>
            </a>
            <a href="http://www.maliaccesorios.com/index.php/productos/complementos-adds.html">
            <img src="/img/complementos-home-mali.jpg" border="0" alt=""/>
            </a>
          </p>
          <p/>
          <ul class="content-links"/>
        </div>
        
        <!-- PagincaciÃ³n-->
        <div ng-controller="PaginationDemoCtrl">
        <h4>Default</h4>
        <pagination total-items="totalItems" ng-model="currentPage" ng-change="pageChanged()"></pagination>
        <pagination boundary-links="true" total-items="totalItems" ng-model="currentPage" class="pagination-sm" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination>
        <pagination direction-links="false" boundary-links="true" total-items="totalItems" ng-model="currentPage"></pagination>
        <pagination direction-links="false" total-items="totalItems" ng-model="currentPage" num-pages="smallnumPages"></pagination>
        <pre>The selected page no: 3</pre>
        <button class="btn btn-info" ng-click="setPage(3)">Set current page to: 3</button>
    
        <hr />
        <h4>Pager</h4>
        <pager total-items="totalItems" ng-model="currentPage"></pager>
    
        <hr />
        <h4>Limit the maximum visible buttons</h4>
        <pagination total-items="bigTotalItems" ng-model="bigCurrentPage" max-size="maxSize" class="pagination-sm" boundary-links="true"></pagination>
        <pagination total-items="bigTotalItems" ng-model="bigCurrentPage" max-size="maxSize" class="pagination-sm" boundary-links="true" rotate="false" num-pages="numPages"></pagination>
        <pre>Page: {{bigCurrentPage}} / {{numPages}}</pre>
    </div>
        
          <ul class="content-links"/>
        </ion-content>
      </ion-view>
  </body>
</html>
